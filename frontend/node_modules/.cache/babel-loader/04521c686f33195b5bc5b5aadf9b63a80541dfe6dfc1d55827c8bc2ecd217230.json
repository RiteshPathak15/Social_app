{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import'../CSS/SignIn.css';import{Link,useNavigate}from'react-router-dom';import Logo from'../img/logo.jpeg';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{LoginContext}from'../context/LoginContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SignIn(){const notifyA=msg=>toast.error(msg);const notifyB=msg=>toast.success(msg);const{setUserLogin}=useContext(LoginContext);const[Email,setEmail]=useState(\"\");const[Password,setPassword]=useState(\"\");const navigate=useNavigate();// const { setUserLogin } = useContext(LoginContext)\nconst showPass=()=>{var x=document.getElementById(\"password\");console.log(\"Clicked\");if(x.type===\"password\"){x.type=\"text\";}else{x.type=\"password\";}};const emailRegex=/^[a-zA-Z]{1,20}[0-9]{2}[a-zA-Z]{2,5}@student\\.mes\\.ac\\.in$/;const emailAdmin=/^[a-zA-Z]{1,20}[0-9]{2}[a-zA-Z]{2,5}@mes\\.ac\\.in$/;// Define the showPopup function\nconst showPopup=()=>{document.getElementById('popup').style.display='flex';};const verify=()=>{fetch(\"/SignIn\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:Email,Password:Password})}).then(res=>res.json()).then(data=>{if(data.error){notifyA(data.error);}else{notifyB(data.message);const dataString=JSON.stringify(data);localStorage.setItem('jwt',data.token);localStorage.setItem('user',JSON.stringify(data.user));localStorage.setItem('token',dataString);setUserLogin(true);navigate(\"/Home\");}console.log(data);});};useEffect(()=>{document.getElementById('login-SignIn-form').addEventListener('submit',function(event){event.preventDefault();if(emailRegex){console.log(\"Login\");//  navigate(\"/Profile\")\n}else{notifyA('Login failed. Invalid email SignIn-format.');}});},[]);// Empty dependency array ensures it runs only once after the initial render\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Pillai College Logo\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"SignIn-form\",id:\"login-SignIn-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlhtmlFor:\"email\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"}),\" Email:\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:Email,onChange:e=>{setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlhtmlFor:\"password\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\"}),\" Password:\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:Password,onChange:e=>{setPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group remember-me\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"remeber\",onClick:showPass,name:\"remember\"}),/*#__PURE__*/_jsx(\"label\",{htmlhtmlFor:\"remember\",children:\"See Password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"login-btn\",onClick:()=>{verify();},children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"forgot-password\",children:/*#__PURE__*/_jsx(Link,{to:\"Forgot\",children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"create-account\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(\"button\",{onClick:showPopup,children:\"Create One\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay\",id:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Please select your role:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Student\",children:\"Student\"})}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Admin\",children:\"Administrator\"})})]})]})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","Link","useNavigate","Logo","toast","ToastContainer","LoginContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SignIn","notifyA","msg","error","notifyB","success","setUserLogin","Email","setEmail","Password","setPassword","navigate","showPass","x","document","getElementById","console","log","type","emailRegex","emailAdmin","showPopup","style","display","verify","fetch","method","headers","body","JSON","stringify","email","then","res","json","data","message","dataString","localStorage","setItem","token","user","addEventListener","event","preventDefault","children","className","src","alt","id","htmlhtmlFor","name","value","onChange","e","target","required","onClick","to"],"sources":["C:/Users/pursh/OneDrive/Desktop/college/backend/frontend/pillai/src/pages/SignIn.js"],"sourcesContent":["import React, { useEffect ,useState,useContext} from 'react';\r\nimport '../CSS/SignIn.css';\r\nimport { Link ,useNavigate} from 'react-router-dom';\r\nimport Logo from '../img/logo.jpeg';\r\nimport {toast,ToastContainer} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { LoginContext } from '../context/LoginContext';\r\nexport default function SignIn() {\r\n  const notifyA = (msg) => toast.error(msg)\r\n  const notifyB = (msg) => toast.success(msg)\r\n  const {setUserLogin}=useContext(LoginContext);\r\n  const [Email, setEmail] = useState(\"\");\r\n  const [Password, setPassword] = useState(\"\");\r\n  const navigate = useNavigate()\r\n  // const { setUserLogin } = useContext(LoginContext)\r\n  const showPass =()=> {\r\n    var x = document.getElementById(\"password\");\r\n    console.log(\"Clicked\");\r\n    if (x.type === \"password\") {\r\n      x.type = \"text\";\r\n    } else {\r\n      x.type = \"password\";\r\n    }\r\n  };\r\n\r\n  const emailRegex =/^[a-zA-Z]{1,20}[0-9]{2}[a-zA-Z]{2,5}@student\\.mes\\.ac\\.in$/;\r\n  const emailAdmin =/^[a-zA-Z]{1,20}[0-9]{2}[a-zA-Z]{2,5}@mes\\.ac\\.in$/;\r\n // Define the showPopup function\r\n  const showPopup = () => {\r\n    document.getElementById('popup').style.display = 'flex';\r\n  };\r\n  const verify=()=>{\r\n\r\n     fetch(\"/SignIn\", {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        email: Email,\r\n        Password: Password\r\n\r\n      })\r\n    }).then(res => res.json())\r\n      .then(data => {\r\n        if (data.error) {\r\n          notifyA(data.error)\r\n        } else {\r\n          notifyB(data.message);\r\n          const dataString = JSON.stringify(data);\r\n          localStorage.setItem('jwt',data.token);\r\n          localStorage.setItem('user',JSON.stringify(data.user));\r\n          localStorage.setItem('token', dataString);\r\n          setUserLogin(true)\r\n          navigate(\"/Home\")\r\n        }\r\n        console.log(data)\r\n      })\r\n  }\r\n\r\n    \r\n  \r\n  useEffect(() => {\r\n    document.getElementById('login-SignIn-form').addEventListener('submit', function (event) {\r\n      event.preventDefault();\r\n      if (emailRegex) {\r\n      console.log(\"Login\")\r\n      //  navigate(\"/Profile\")\r\n      } else {\r\n        notifyA('Login failed. Invalid email SignIn-format.');\r\n      }\r\n    });\r\n    \r\n  }, []); // Empty dependency array ensures it runs only once after the initial render\r\n\r\n  return (\r\n    <>\r\n      <body>\r\n        <div className=\"background-image\"></div>\r\n        <div className=\"login-container\">\r\n          <div className=\"user-icon\">\r\n            {/* <!-- Update the image source with a valid URL or a relative path --> */}\r\n            <img src={Logo} alt=\"Pillai College Logo\" />\r\n          </div>\r\n          <form className='SignIn-form' id=\"login-SignIn-form\">\r\n            <div className=\"input-group\">\r\n              <label htmlhtmlFor=\"email\"><i className=\"fas fa-envelope\"></i> Email:</label>\r\n              <input type=\"email\" id=\"email\" name=\"email\" value={Email} onChange={(e) => { setEmail(e.target.value) }} required />\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <label htmlhtmlFor=\"password\"><i className=\"fas fa-lock\"></i> Password:</label>\r\n              <input type=\"password\" id=\"password\"  name=\"password\" value={Password} onChange={(e) => { setPassword(e.target.value) }} required />\r\n            </div>\r\n            <div className=\"input-group remember-me\">\r\n              <input type=\"checkbox\" id=\"remeber\" onClick={showPass}  name=\"remember\" />\r\n              <label htmlhtmlFor=\"remember\">See Password</label>\r\n            </div>\r\n            <button type=\"submit\" id=\"login-btn\" onClick={()=>{verify()}}>Login</button>\r\n            <p className=\"forgot-password\"><Link to=\"Forgot\">Forgot Password?</Link></p>\r\n          </form>\r\n          <p className=\"create-account\">Don't have an account?<button onClick={showPopup}>Create One</button></p>\r\n        </div>\r\n        {/* <!-- Popup Box --> */}\r\n        <div className=\"popup-overlay\" id=\"popup\">\r\n          <div className=\"popup-content\">\r\n            <p><h1>Please select your role:</h1></p>\r\n            <div className=\"popup-buttons\">\r\n              <button><Link to=\"/Student\">Student</Link></button>\r\n              <button><Link to=\"/Admin\">Administrator</Link></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      <ToastContainer/>\r\n    </>\r\n  );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}